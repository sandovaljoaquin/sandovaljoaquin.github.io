[
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "Resources",
    "section": "",
    "text": "this is an h1 element\n\n\nthis is an h1 element with the tile class\n\n\nthis paragraph is brown\n\n\nthis text is centered and brown"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Joaquin Sandoval",
    "section": "",
    "text": "Hello, my name is Joaquin Sandoval. I am currently a student in the Masters of Environmental Data Science Program at the Bren School of Environmental Science and Management at UC Santa Barbara. I am excited to combine my background in Marine Ecology with strong data analysis and visualization skills to enhance coastal conservation efforts wherever I might go!"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html",
    "href": "blogposts/corallivores/corallivores_rough.html",
    "title": "Corallivores",
    "section": "",
    "text": "library(tidyverse)\nlibrary(here)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(patchwork)\nlibrary(betareg)\nlibrary(glmmTMB)\ntheme_set(theme_classic(12))\nset.seed(42)\nknitr::include_graphics(\"corallivore.png\")"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#is-there-a-relationship-between-decreasing-coral-cover-and-corallivore-abundance-in-backreef-sites-around-moorea-french-polynesia",
    "href": "blogposts/corallivores/corallivores_rough.html#is-there-a-relationship-between-decreasing-coral-cover-and-corallivore-abundance-in-backreef-sites-around-moorea-french-polynesia",
    "title": "Corallivores",
    "section": "Is there a relationship between decreasing coral cover and corallivore abundance in Backreef sites around Mo’orea, French Polynesia?",
    "text": "Is there a relationship between decreasing coral cover and corallivore abundance in Backreef sites around Mo’orea, French Polynesia?\nCoral reefs around the islands of Mo’orea are threatened by a variety of stressors such as cyclone activity and the outbreak of predatory sea stars (Acanthaster planci) that feed on coral tissue. As a response to these stressors, many locations around the island have undergone phase shifts in their benthic composition that involves the transformation of coral dominated communities to macroalgae dominated communities. In particular, the backreefs have been heavily transformed by the presence of Turbinaria, a well defended and persistent algae. I was interested if the resulting fish communities have changed as a result of this, particularly the abundance of Corallivores which feed primarily on scleractinian corals.\nThe following analyses involve two datasets, both from the Mo’orea Coral Reef Long Term Ecological Research.\nfish : describe the species abundance and estimated size distributions (total body length to the greatest precision possible) of fishes surveyed as part of MCR LTER’s annual reef fish monitoring program. This dataset will be filtered to Backreef sites and for the fine trophic level of Corallivore.\ncoral_cover : describe the percentage cover of all stony corals (Scleractinia, pooled among genera) and other major groups analyzed from 0.5 x 0.5 m photographic quadrats at the Backreef habitat at the Moorea Coral Reef LTER, French Polynesia.\n\n# Read in fish and coral data \nfish &lt;- read_csv(here(\"blogposts\", \"corallivores\", \"data\", \"MCR_LTER_Annual_Fish_Survey_20250324.csv\")) |&gt; \n  janitor::clean_names()\n\ncoral_cover &lt;- read_csv(here(\"blogposts\", \"corallivores\", \"data\", \"MCR_LTER_Coral_Cover_Backreef_Long_20250429.csv\")) |&gt; \n  janitor::clean_names()"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#change-in-backreef-fish-community-through-time-and-change-in-corallivore-abundance-through-time",
    "href": "blogposts/corallivores/corallivores_rough.html#change-in-backreef-fish-community-through-time-and-change-in-corallivore-abundance-through-time",
    "title": "Corallivores",
    "section": "Change in Backreef Fish Community through time and change in Corallivore abundance through time",
    "text": "Change in Backreef Fish Community through time and change in Corallivore abundance through time\n\nfish_through_years &lt;- fish |&gt; \n  group_by(year, fine_trophic) |&gt; \n  filter(!fine_trophic %in% c(\"Sediment Sucker\", \"Planktivore_exclusively\", \"na\")) |&gt; \n  summarise(n = n()) |&gt; \n  mutate(total_number = n)\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\ngroups_through_years_plot &lt;- ggplot(fish_through_years, \n       aes(x = year, \n           y = total_number, \n           color = fine_trophic)) + \n  geom_line() + \n  labs(x = \"Year\", \n       y = \"Total Number of Fish\", \n       title = \"Change in Backreef Fish Abundance (2006-2025)\", \n       color = \"Fish Type\")\n\ncorallivores_through_years &lt;- fish |&gt; \n  group_by(year) |&gt; \n  filter(habitat == \"Backreef\") |&gt; \n  filter(fine_trophic == \"Corallivore\") |&gt; \n  summarise(n = n()) |&gt; \n  mutate(total_number = n)\n  \ncorallivore_plot &lt;- ggplot(corallivores_through_years, \n       aes(x = year, \n           y = total_number)) + \n  geom_line(color = \"lightblue\") + \n  labs(x = \"Year\", \n    y = \"Total Number of Fish\", \n    title = \"Change in Backreef Corallivore Abundance (2006-2025)\")\n\n\ngroups_through_years_plot \n\n\n\n\n\n\n\ncorallivore_plot"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#total-counts-of-each-trophic-level-in-2006-and-2024.",
    "href": "blogposts/corallivores/corallivores_rough.html#total-counts-of-each-trophic-level-in-2006-and-2024.",
    "title": "Corallivores",
    "section": "Total Counts of each trophic level in 2006 and 2024.",
    "text": "Total Counts of each trophic level in 2006 and 2024.\nCorallivores dropped from 3rd most abundant group in first year of survey to 6th most abundant group in the last sampling year.\n\nfish_2006 &lt;- fish |&gt; \n  group_by(fine_trophic, habitat) |&gt; \n  filter(fine_trophic != \"na\")|&gt; \n  filter(year == \"2006\") |&gt; \n  filter(habitat == \"Backreef\") |&gt; \n  summarise(n = n()) |&gt; \n  mutate(total_number = n) |&gt; \n  arrange(desc(total_number))\n          \n          \nfish_2006_plot &lt;- ggplot(fish_2006, aes(x = total_number, \n                      y = reorder(fine_trophic, +total_number), \n                      fill = fine_trophic)) +\n  geom_col() + \n  ylab(\" \") + \n  xlab(\"Count\") + \n  labs(title = \" 2006 Backreef Fish Abundance by Group\", \n       x = \"Count\") +\n  theme(legend.position = \"none\")\n\n\nfish_2024 &lt;- fish |&gt; \n  group_by(fine_trophic, habitat) |&gt; \n  filter(fine_trophic != \"na\")|&gt; \n  filter(year == \"2024\") |&gt; \n  filter(habitat == \"Backreef\") |&gt; \n  summarise(n = n()) |&gt; \n  mutate(total_number = n) |&gt; \n  arrange(desc(total_number))\n\nfish_2024_plot &lt;- ggplot(fish_2024, aes(x = total_number, \n                      y = reorder(fine_trophic, +total_number), \n                      fill = fine_trophic)) +\n  geom_col() + \n  ylab(\" \") + \n  xlab(\"Count\") + \n  labs(title = \" 2024 Backreef Fish Abundance by Group\", \n       x = \"Count\") +\n  theme(legend.position = \"none\")\n\n\nfish_2006_plot\n\n\n\n\n\n\n\nfish_2024_plot\n\n\n\n\n\n\n\n\n\nknitr::include_graphics(\"DAG.png\")\n\n\n\n\n\n\n\n\nThe three predictor variables that will be included in this model are LTER site, year, and mean coral cover of transects within a site. The site and year should determine the coral cover which in turn should determine the response; proportion corallivore in the fish community."
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#statistical-model",
    "href": "blogposts/corallivores/corallivores_rough.html#statistical-model",
    "title": "Corallivores",
    "section": "Statistical model",
    "text": "Statistical model\n\\[\n\\begin{align}\n\\text{Proportion Corallivores} &\\sim Beta(\\mu, \\phi) \\\\\nlogit(\\mu) &= \\beta_0 + \\beta_1 \\text{Mean Site Coral Cover} + \\beta_2 \\text{Site} + \\beta_3 \\text{Year}\n\\end{align}\n\\] The response variable is a proportion between 0 and 1. We want to investigate how that changes with the predictor variables.\nμ: the mean of beta distribution. ϕ: precision parameter. The larger the ϕ, less variance in distribution. The inverse is true: a low ϕ, yields more variance in distribution.\nBecause μ needs to be between 0 and 1, a transformation using the logit link is necessary to convert values to that range.\nTo summarise, as the predictor changes, the expected proportion will change at a constant rate between 0 and 1."
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#simulate-data-according-to-model-assumptions",
    "href": "blogposts/corallivores/corallivores_rough.html#simulate-data-according-to-model-assumptions",
    "title": "Corallivores",
    "section": "Simulate data according to model assumptions",
    "text": "Simulate data according to model assumptions\nThis part im very unsure about.\n\n# coral_cover &lt;- 24.14776\n# logit_mu &lt;- 74.182211 + (0.012021 * coral_cover)\n# phi &lt;-  116.34                    # this is shape1+shape2\n# mu &lt;- 1 / (1 + exp(-logit_mu)) # this is shape1/(shape1+shape2)\n# shape1 &lt;- mu * phi\n# shape2 &lt;- phi - shape1"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#model-fit-to-simulated-data-recovers-the-paramters",
    "href": "blogposts/corallivores/corallivores_rough.html#model-fit-to-simulated-data-recovers-the-paramters",
    "title": "Corallivores",
    "section": "Model fit to simulated data recovers the paramters",
    "text": "Model fit to simulated data recovers the paramters"
  },
  {
    "objectID": "blogposts/corallivores/corallivores_rough.html#inference",
    "href": "blogposts/corallivores/corallivores_rough.html#inference",
    "title": "Corallivores",
    "section": "Inference",
    "text": "Inference\nHa: There is a positive effect between mean site coral cover and proportion corallivore in the backreef fish community.\nHo : There is no effect of mean site coral cover on proportion corallivore in the backreef fish community.\nFirst, processing data to create a dataframe which contains the corallivore proportion at each LTER backreef site each year, and the mean coral cover of monitored transects at each LTER backreed site, each year.\n\ncorallivore &lt;- fish |&gt; \n  filter(habitat == \"Backreef\") |&gt; \n  group_by(year, site ) |&gt; \n  summarise(proportion_corallivore = mean(fine_trophic == \"Corallivore\", na.rm = TRUE)) \n\n\ncoral_cover &lt;- coral_cover |&gt; \n  filter(benthic_category == \"coral\") |&gt; \n  group_by(year, site) |&gt; \n  summarise(mean_site_coral_cover = mean(percent_cover)) \n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\nCombine both clean data frames\n\nfull_data_frame &lt;- left_join(coral_cover, corallivore, join_by(year, site))\n\nfull_data_frame &lt;- full_data_frame |&gt; \n  mutate(site_number = (str_sub(site, 6))) |&gt; \n  mutate(site_number = as.numeric(site_number))\n\nPlot relationship\n\nggplot(full_data_frame, \n       aes(x = mean_site_coral_cover, \n           y = proportion_corallivore, \n           color = year)) + \n  geom_point() + \n  facet_wrap(\"site\") + \n  labs(x = \"Mean Site Coral Cover\", \n       y = \"Proportion Corallivore\", \n       color = \"Year\")\n\n\n\n\n\n\n\n\n** Need to decide to use betareg() or glmmTMB()** - Having issues generating CI. Manually retrieve SE values? Only possible with glmmTMB() so far.\n\n# Fit beta regression model to data using betareg()\n\nmodel &lt;- betareg(\n  proportion_corallivore ~ mean_site_coral_cover + site_number + year,\n  data = full_data_frame,\n  link = \"logit\"\n)\nsummary(model)\n\n\nCall:\nbetareg(formula = proportion_corallivore ~ mean_site_coral_cover + site_number + \n    year, data = full_data_frame, link = \"logit\")\n\nQuantile residuals:\n    Min      1Q  Median      3Q     Max \n-2.5642 -0.5924 -0.0735  0.6719  2.5193 \n\nCoefficients (mean model with logit link):\n                       Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)           74.182211  12.562101   5.905 3.52e-09 ***\nmean_site_coral_cover  0.012021   0.003164   3.799 0.000145 ***\nsite_number            0.083581   0.020400   4.097 4.18e-05 ***\nyear                  -0.038341   0.006229  -6.155 7.49e-10 ***\n\nPhi coefficients (precision model with identity link):\n      Estimate Std. Error z value Pr(&gt;|z|)    \n(phi)   116.34      15.48   7.517 5.59e-14 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nType of estimator: ML (maximum likelihood)\nLog-likelihood: 265.9 on 5 Df\nPseudo R-squared: 0.4993\nNumber of iterations: 56 (BFGS) + 6 (Fisher scoring) \n\n\n\n# Generate predicted values of corallivore proportion using model \n\npred_grid &lt;- expand_grid(mean_site_coral_cover = seq(0,1, by = 0.01)) |&gt; \n  mutate(site_number = mean(full_data_frame$site_number, na.rm = TRUE), \n         year = mean(full_data_frame$year, na.rm = TRUE)) \n\npred_grid &lt;- pred_grid |&gt; \nmutate(proportion_corallivore = predict(object = model, \n                            newdata = pred_grid, \n                            type = \"response\"))\n\n\n# # Fit beta regression model to data using glmmTMB()\n\ncorallivore_model &lt;- glmmTMB(proportion_corallivore ~ mean_site_coral_cover + site_number + year,\n  data = full_data_frame,\n  family = beta_family(link = \"logit\"))\n\ncorallivore_model_summary &lt;- summary(corallivore_model)\n\ncorallivore_model_summary$coefficients$cond\n\n                         Estimate   Std. Error   z value     Pr(&gt;|z|)\n(Intercept)           74.18221106 12.403198687  5.980894 2.219169e-09\nmean_site_coral_cover  0.01202105  0.003101883  3.875402 1.064487e-04\nsite_number            0.08358104  0.019548359  4.275604 1.906199e-05\nyear                  -0.03834053  0.006149259 -6.234984 4.518252e-10\nattr(,\"ddf\")\n[1] \"asymptotic\"\n\n\n\n# Generate Confidence Interval\n\nB0 = corallivore_model_summary$coefficients$cond[1]\nB1 = corallivore_model_summary$coefficients$cond[2]\nB2 =  corallivore_model_summary$coefficients$cond[3]\nB3 = corallivore_model_summary$coefficients$cond[4]\n\nse_intercept &lt;- corallivore_model_summary$coefficients$cond[5]\nse_mean_site_coral_cover &lt;- corallivore_model_summary$coefficients$cond[6]\nse_site_number&lt;- corallivore_model_summary$coefficients$cond[7]\nse_year &lt;- corallivore_model_summary$coefficients$cond[8]\n\n\nB0_upper= B0+1.96*se_intercept\nB0_lower=B0-1.96*se_intercept\n\nB1_upper= B1+1.96*se_mean_site_coral_cover\nB1_lower=B1-1.96*se_mean_site_coral_cover \n\nB2_upper= B2+1.96*se_site_number\nB2_lower=B2+1.96*se_site_number\n\nB3_upper= B3+1.96*se_year\nB3_lower=B3+1.96*se_year \n\n\n# Plot betaregression with CIs - pending \n\nggplot(pred_grid, \n       aes(x = mean_site_coral_cover, \n           y = proportion_corallivore)) + \n  geom_line(color = \"lightblue\") + \n  labs(x = \"Mean Site Coral Cover\", \n       y = \"Proportion Corallivore\")\n\n\n\n\n\n\n\n\nA hypothesis is tested and the evidence is interpreted"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html",
    "href": "blogposts/fire-analyses/fire_analyses.html",
    "title": "Visualizing Fire Scars through False Color",
    "section": "",
    "text": "Author: Joaquin Sandoval\nGithub repository: https://github.com/sandovaljoaquin/eaton-palisades-fire-analysis\nOverview of Palisades and Eaton Wildfires in a satellite image provided by MaxarTechnologies."
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#about",
    "href": "blogposts/fire-analyses/fire_analyses.html#about",
    "title": "Visualizing Fire Scars through False Color",
    "section": "About",
    "text": "About\nThe Eaton and Palisades Fires occured in Janurary 2025 in Los Angeles County and were some of the most devastating in California history. These two fires scorched a combined amount of 37,469 acres and destroyed or damaged an estimated 18,298 structures (Cal Fire). The following analyses will enable visualization of the fire scar left behind using remote sensing data and investigate if minority groups were disproportionately affected.\n\nHighlights :\n\nFire perimeter boundary data import and exploration.\nLandsat data import and exploration as an xarray.Dataset.\nRestoring geospatial information to an xarray.Dataset.\nPlotting a True-Color Image and False Color Image with fire perimeter boundaries.\nCropping census tract data from EJI to the fire boundaries.\nPlotting estimated minority % of cenus tracts within each fire boundary.\n\n\n\nAbout the data:\nThere are three datasets used in this analysis.\n\neaton_boundary: layer contains dissolved fire perimeter/boundary for Eaton Fire. (01/21/2025)\npalisades_boundary: layer contains dissolved fire perimeter/boundary for Palisades Fire. (01/21/2025)\nlandsat: simplified collection of bands (red, green, blue, near-infrared, and shortwave infrared) from the Landsat Collection 2 Level-2 atmospherically correxted surface reflected data collected by the Landsat 8 satellite. This data was clipped to an area of Los Angeles County to include both fire perimeters.\neji_california: 2024 Environmental Justice Index data for California in the geodatabase data format.\n\n\n\nReferences:\n[1] and [2]:\nCredit: NIFC FIRIS The source of the hosted service/dataset is here https://services1.arcgis.com/jUJYIo9tSA7EHvfZ/ArcGIS/rest/services/CA_Perimeters_NIFC_FIRIS_public_view/FeatureServer\n[3] Microsoft Planetary Computer. (n.d.). Landsat C2 L2. Microsoft Planetary Computer. Retrieved November 19, 2025, from https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2\n[4] Centers for Disease Control and Prevention and Agency for Toxic Substances Disease Registry. [Year] Environmental Justice Index. Accessed [Insert Date]. https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#begin-visualization",
    "href": "blogposts/fire-analyses/fire_analyses.html#begin-visualization",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Begin Visualization",
    "text": "Begin Visualization\nImport necessary packages.\n\nimport os\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport geopandas as gpd\nimport xarray as xr \nimport contextily as ctx"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#fire-perimeter-data-exploration",
    "href": "blogposts/fire-analyses/fire_analyses.html#fire-perimeter-data-exploration",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Fire perimeter Data Exploration",
    "text": "Fire perimeter Data Exploration\nImport both perimeters for the Eaton and Palisades Fires and perform preliminary data analysis. This analysis should include each dataset’s CRS, datum, and whether it is projected or geographic.\n\n# Import perimeter of eaton fire \nfp = os.path.join(\"data\", \"Eaton_Perimeter_20250121\", \"Eaton_Perimeter_20250121.shp\")\neaton_boundary = gpd.read_file(fp)\n\n# Import perimeter of palisades fire \nfp = os.path.join(\"data\", \"Palisades_Perimeter_20250121\", \"Palisades_Perimeter_20250121.shp\")\npalisades_boundary = gpd.read_file(fp)\n\n\n# Examine CRS details of `eaton_boundary`\nprint(f\"CRS of eaton_boundary: {eaton_boundary.crs}\")\nprint('Datum', eaton_boundary.crs.datum)\nprint('Is geographic?', eaton_boundary.crs.is_geographic)\nprint('Is projected?', eaton_boundary.crs.is_projected)\n\nCRS of eaton_boundary: EPSG:3857\nDatum World Geodetic System 1984 ensemble\nIs geographic? False\nIs projected? True\n\n\n\n# Examine CRS details of `palisades_boundary`\nprint(f\"CRS of palisades_boundary: {palisades_boundary.crs}\")\nprint('Datum', palisades_boundary.crs.datum)\nprint('Is geographic?', palisades_boundary.crs.is_geographic)\nprint('Is projected?', palisades_boundary.crs.is_projected)\n\nCRS of palisades_boundary: EPSG:3857\nDatum World Geodetic System 1984 ensemble\nIs geographic? False\nIs projected? True"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#netcdf-data-import-and-exploration",
    "href": "blogposts/fire-analyses/fire_analyses.html#netcdf-data-import-and-exploration",
    "title": "Visualizing Fire Scars through False Color",
    "section": "NetCDF Data Import and Exploration",
    "text": "NetCDF Data Import and Exploration\nImport the landsat dataset as an xarray.Dataset and perform preliminary exploration. Identify the variables, dimensions, and coordinates of the xarray.Dataset\n\n# Import landsat data using `xr.open_dataset()`\nlandsat = xr.open_dataset('data/landsat8-2025-02-23-palisades-eaton.nc')\n\n\nlandsat.head()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 596B\nDimensions:      (y: 5, x: 5)\nCoordinates:\n  * y            (y) float64 40B 3.799e+06 3.799e+06 ... 3.799e+06 3.799e+06\n  * x            (x) float64 40B 3.344e+05 3.344e+05 ... 3.345e+05 3.345e+05\n    time         datetime64[ns] 8B ...\nData variables:\n    red          (y, x) float32 100B ...\n    green        (y, x) float32 100B ...\n    blue         (y, x) float32 100B ...\n    nir08        (y, x) float32 100B ...\n    swir22       (y, x) float32 100B ...\n    spatial_ref  int64 8B ...xarray.DatasetDimensions:y: 5x: 5Coordinates: (3)y(y)float643.799e+06 3.799e+06 ... 3.799e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., 3798960., 3798930.])x(x)float643.344e+05 3.344e+05 ... 3.345e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., 334500., 334530.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]Data variables: (6)red(y, x)float32...grid_mapping :spatial_ref[25 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[25 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[25 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[25 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[25 values with dtype=float32]spatial_ref()int64...crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :334395.0 30.0 0.0 3799065.0 0.0 -30.0[1 values with dtype=int64]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0], dtype='float64', name='y'))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0], dtype='float64', name='x'))Attributes: (0)\n\n\nDimensions:\n(y:5, x:5). The xarray dataset is a 5 x 5 grid defining the shape of the xarray dataset.\nCoordinates:\nx, y: coordinate values for the grid axis.\ntime : spatial coordinate for the temporal axis of the xarray dataset.\nspatial_ref : spatial reference information which contains no data. This will be solved in the following step of the notebook.\nData varibales:\nred, green, blue: visible spectral bands nir08: near-infrared band swir22: short-wave infrared band"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#restoring-geospatial-information",
    "href": "blogposts/fire-analyses/fire_analyses.html#restoring-geospatial-information",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Restoring Geospatial Information",
    "text": "Restoring Geospatial Information\nThe next section of this notebook will focus on restoring the geospatial information of the xarray dataset. This will involve obtaining the CRS using the spatial_ref.crs_wktattribute and then adding it back to the xarray dataset.\n\n# Using rio.crs to print CRS of the dataset\nprint(landsat.rio.crs)\n\nNone\n\n\n\n# Geospatial information for dataset stored in `spatial_ref`\n# Print CRS of `landsat` by accessing `spatial_ref.crs_wkt` attribute\nprint(landsat.spatial_ref.crs_wkt)\n\nPROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\n\n\n\n# Recover geospatial information by using `rio.write_crs()` and the spatial reference information \nlandsat = landsat.rio.write_crs(landsat.spatial_ref.crs_wkt)\n\n\n# Print the  CRS of updated `landsat` dataset \nprint(landsat.rio.crs)\n\nEPSG:32611"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#true-color-image",
    "href": "blogposts/fire-analyses/fire_analyses.html#true-color-image",
    "title": "Visualizing Fire Scars through False Color",
    "section": "True Color Image",
    "text": "True Color Image\nWith landsat now containing geospatial information, it can be plotted. To plot a true color image, the r,g,b bands have to be selected from the dataset. Use plot.imshow() to display raster data.\n\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\n    spatial_ref  int64 8B 0\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (4)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Data variables: (5)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Select the red, green, and blue variables of the xarray.Dataset holding the Landsat data\n\nlandsat[['red','green','blue']].to_array().plot.imshow()\n\nClipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\n\n\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\nThe above plot is empty. The plot.imshow() arguments of vmax and robust need to be changed and nan values need to be removed from the xarray data set. Check each band to see if there are nans present and remove if so.\n\n# Adjust the scale used for plotting the bands to get a true color image\nlandsat[['red','green','blue']].to_array().plot.imshow(robust = True)\n\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\n\n# Check if red band has nan values\nnp.isnan(landsat['red']).any()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray 'red' ()&gt; Size: 1B\narray(False)\nCoordinates:\n    time         datetime64[ns] 8B 2025-02-23T18:28:13.651369\n    spatial_ref  int64 8B 0xarray.DataArray'red'Falsearray(False)Coordinates: (2)time()datetime64[ns]2025-02-23T18:28:13.651369array('2025-02-23T18:28:13.651369000', dtype='datetime64[ns]')spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Indexes: (0)Attributes: (0)\n\n\n\n# Check if green band has na values \nnp.isnan(landsat['green']).any()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray 'green' ()&gt; Size: 1B\narray(True)\nCoordinates:\n    time         datetime64[ns] 8B 2025-02-23T18:28:13.651369\n    spatial_ref  int64 8B 0xarray.DataArray'green'Truearray(True)Coordinates: (2)time()datetime64[ns]2025-02-23T18:28:13.651369array('2025-02-23T18:28:13.651369000', dtype='datetime64[ns]')spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Indexes: (0)Attributes: (0)\n\n\n\n# Check if blue band has nan values \nnp.isnan(landsat['blue']).any()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray 'blue' ()&gt; Size: 1B\narray(True)\nCoordinates:\n    time         datetime64[ns] 8B 2025-02-23T18:28:13.651369\n    spatial_ref  int64 8B 0xarray.DataArray'blue'Truearray(True)Coordinates: (2)time()datetime64[ns]2025-02-23T18:28:13.651369array('2025-02-23T18:28:13.651369000', dtype='datetime64[ns]')spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Indexes: (0)Attributes: (0)\n\n\nPlot the true color image with landsat with no nans.\n\n# Using .fillna() to substitute the nan values with 0 \nlandsat['green'] = landsat['green'].fillna(0)\nlandsat['blue'] = landsat['blue'].fillna(0)\n\n\n# Plot new true color image without warnings \nlandsat[['red','green','blue']].to_array().plot.imshow(robust = True)\n\n\n\n\n\n\n\n\nComparing the ouputs for parts (a) and (e).\nThe output of part (a) had the correct window; y and x coordinates of projection, but did not have any data from the red, green, or blue bands plotted. It had the following warnings:\nClipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\ninvalid value encountered in cast xx = (xx * 255).astype(np.uint8)\nThe output of part (e) had the correct window and plotted the rgb values after setting the robust paramter equal to true and removing nan values."
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#false-color-image",
    "href": "blogposts/fire-analyses/fire_analyses.html#false-color-image",
    "title": "Visualizing Fire Scars through False Color",
    "section": "False Color Image",
    "text": "False Color Image\nPlot the false color image of landsat by selecting the short-wave infrared, near-wave infrared, and red bands in this order.\n\n# Plot false color image with short-wave infared, near-infared, and red variables \nlandsat[['swir22','nir08','red']].to_array().plot.imshow(vmin = 0, \n                                                       vmax = 20000, \n                                                       robust = True)"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#plot-fire-perimeters-over-false-color-image",
    "href": "blogposts/fire-analyses/fire_analyses.html#plot-fire-perimeters-over-false-color-image",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Plot Fire Perimeters over False-color Image",
    "text": "Plot Fire Perimeters over False-color Image\nPlot the false color image generated along with both eaton_boundary and palisades_boundary. landsat has a different crs than both boundaries. Convert the CRS of the boundary data to the CRS if the landsat data.\n\n# Convert  to CRS of both fire boundaries to landsat CRS\n\neaton_boundary = eaton_boundary.to_crs(landsat.rio.crs)\npalisades_boundary = palisades_boundary.to_crs(landsat.rio.crs)\n\n\n# Shortwave infrared/near-infrared/red false color image together with both fire perimeters\nfig, ax = plt.subplots()\n\nlandsat[['swir22','nir08','red']].to_array().plot.imshow(vmin = 0, \n                                                       vmax = 20000, \n                                                       robust = True)\n                                                      \n\neaton_boundary.plot(ax=ax,         \n                 edgecolor='black',\n                 color = 'red',\n                 linewidth=1.25, \n                 alpha = .4)\n\npalisades_boundary.plot(ax=ax,        \n                edgecolor = 'black',\n                color = 'red',\n                linewidth= 1.25, \n                alpha = .3)\n\nplt.figtext(x = .63, \n            y = .65,\n            s =\"Eaton Fire Boundary\", \n            weight = 'bold')\n\nplt.figtext(x = .2, \n            y = .51,\n            s =\"Palisades Fire Boundary\", \n            weight = 'bold')\nax.set_title(\"SWIR/NIR/Red False Color Image and Fire Perimeters\")\nax.axis('off')\n\n\n\n\n\n\n\n\nThe above map shows the false color image generated when selecting the short-wave infrared, near-wave infrared, and red bands from the landsat data and plotting. The boundaries of both fires were overlayed the explicit scar that was revealed from the false color image. False color imagery combines visible wavelength(s) and non-visble wavelength(s) to create satellite images that make differences in land composition more obvious. In this case, the fire scars exhibited an orange color while unscorched areas exhibited green or neutral colors."
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#social-dimensions-analysis-with-the-eji-dataset",
    "href": "blogposts/fire-analyses/fire_analyses.html#social-dimensions-analysis-with-the-eji-dataset",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Social Dimensions Analysis with the EJI Dataset",
    "text": "Social Dimensions Analysis with the EJI Dataset\n\n# Import perimeter of eaton fire \nfp = os.path.join(\"data\", \"Eaton_Perimeter_20250121\", \"Eaton_Perimeter_20250121.shp\")\neaton_boundary = gpd.read_file(fp)\n\n# Import perimeter of palisades fire \nfp = os.path.join(\"data\", \"Palisades_Perimeter_20250121\", \"Palisades_Perimeter_20250121.shp\")\npalisades_boundary = gpd.read_file(fp)\n\n# Import CA EJI gdb \nfp = os.path.join(\"data\", \"EJI_2024_California\", \"EJI_2024_California.gdb\")\neji_california = gpd.read_file(fp)"
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#visualize-extent-of-fires-over-los-angeles-county",
    "href": "blogposts/fire-analyses/fire_analyses.html#visualize-extent-of-fires-over-los-angeles-county",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Visualize Extent of Fires over Los Angeles County",
    "text": "Visualize Extent of Fires over Los Angeles County\nPlot the Palisades and Eaton fires over an open street map to visualize the areas of Los Angeles County that were affected. The CRS of both boundaries is the same so there is no need for manipulation at this point.\n\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\n# ADD FIRE PERIMETERS: UPDATE FILL TRANSPARENCY AND COLOR\n\npalisades_boundary.plot(ax=ax,        \n                edgecolor = 'black',\n                color = 'red',\n                linewidth= 1.25, \n                alpha = .3)\n\neaton_boundary.plot(ax=ax,         \n                 edgecolor='black',\n                 color = 'red',\n                 linewidth=1.25, \n                 alpha = .4)\n\n# ADD LEGEND OR ANNOTATION TO IDENTIFY EACH FIRE\nplt.figtext(x = .63, \n            y = .65,\n            s =\"Eaton Fire Boundary\", \n            weight = 'bold')\n\nplt.figtext(x = .2, \n            y = .51,\n            s =\"Palisades Fire Boundary\", \n            weight = 'bold')\n# ADD TITLE\n\n# Add basemap using contextily\n\nctx.add_basemap(ax, source=ctx.providers.OpenStreetMap.Mapnik, \n                alpha = .5)\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\nThe above image shows fire perimeters over a base map of Los Angeles and surrounding cities. The Palisades Fire occured between Malibu, Calabasas, and Santa Monica. The Eaton Fire occured in Altadena, just north of Pasadena."
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#process-eji-data",
    "href": "blogposts/fire-analyses/fire_analyses.html#process-eji-data",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Process EJI data",
    "text": "Process EJI data\nPlot the boundaries of each fire with census tracts that were affected. This will allow for the analysis with an EJI variable. To investigate if minority groups were disproportionately affected, select ‘E_MINRTY’ as variable of interest.\nAs always, the CRS of the fire perimeter data and EJI data must be consistent.\n\n# Convert the CRS of eji_california to the CRS of palisades_boundary \n\neji_california = eji_california.to_crs(palisades_boundary.crs)\n\nTo investigate census tracts affected in each fire, use gpd.clip to clip to boundary size.\n\n# Clip the shape of eji_california to that of the each fire boundary\n\neji_palisades_clipped = gpd.clip(eji_california, palisades_boundary)\n\neji_eaton_clipped = gpd.clip(eji_california, eaton_boundary)\n\neji_palisades_clipped and eji_eaton_clipped now contain each cenus tract within the boundaries of both fires."
  },
  {
    "objectID": "blogposts/fire-analyses/fire_analyses.html#plot-estimated-minority-of-fire-boundary-cenus-tracts",
    "href": "blogposts/fire-analyses/fire_analyses.html#plot-estimated-minority-of-fire-boundary-cenus-tracts",
    "title": "Visualizing Fire Scars through False Color",
    "section": "Plot Estimated Minority % of Fire Boundary Cenus Tracts",
    "text": "Plot Estimated Minority % of Fire Boundary Cenus Tracts\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(20, 10))\n\n# Estimate minority % variable \neji_variable = 'E_MINRTY'\n\n# Find common min/max for legend range\nvmin = min(eji_palisades_clipped[eji_variable].min(), eji_eaton_clipped[eji_variable].min())\nvmax = max(eji_palisades_clipped[eji_variable].max(), eji_eaton_clipped[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\neji_palisades_clipped.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n    cmap = 'inferno'\n)\nax1.set_title('Palisades Fire')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\neji_eaton_clipped.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n    cmap= 'inferno'\n)\nax2.set_title('Eaton Fire')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Estimate Minority Percentage within Fire Cenus Tracts')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax), cmap = 'inferno')\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\n\ncbar.set_label('Percent Minority')\n\nplt.show()\n\n\n\n\n\n\n\n\nThis image shows two choropleth maps comparing the racial/ethnic minority percentage within the boundaries of the Palisades Fire (left) and the Eaton Fire (right).\nPalisades Fire area: Most tracts are in the lowest percent-minority range (very dark colors near black and purple), indicating a predominantly non-minority population.\nEaton Fire area: Census tracts show much higher minority percentages (yellow, orange, red), indicating a predominantly minority population across most of the fire zone.\nOverall, the visualization highlights a strong demographic contrast between the two fire-affected regions."
  },
  {
    "objectID": "blogposts.html",
    "href": "blogposts.html",
    "title": "Blog Posts",
    "section": "",
    "text": "Corallivores\n\n\n\nR\n\nPython\n\nGeospatial\n\n\n\n\n\n\n\nJoaquin Sandoval\n\n\nDec 4, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualizing Fire Scars through False Color\n\n\n\nR\n\nPython\n\nGeospatial\n\n\n\n\n\n\n\nJoaquin Sandoval\n\n\nNov 5, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Describe what I do professionally"
  },
  {
    "objectID": "about.html#what-i-do-for-work",
    "href": "about.html#what-i-do-for-work",
    "title": "About",
    "section": "",
    "text": "Describe what I do professionally"
  },
  {
    "objectID": "about.html#oustide-work",
    "href": "about.html#oustide-work",
    "title": "About",
    "section": "Oustide work",
    "text": "Oustide work\nOutside of work I"
  }
]